<html lang = "en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>

    <!-- css page -->
    <link rel="stylesheet" href="styles.css">

    <!-- fonts used -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=MuseoModerno:ital,wght@0,100..900;1,100..900&family=Overpass:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">


</head>

<body>
    <h1>Hosting</h1>

    <form id="votingForm">
        <label for="voteFor">Copy and Paste the Things Your Voting for</label>
        <textarea id="voteFor" name="voteFor" required rows="5"></textarea>

        <input type="submit" value="submit">
    </form>

    


    <div class="buttons">
        <a href="index.html" class="button">Back</a>
    </div>



    <script type="module">

      // Import the functions you need from the SDKs you need
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js'
      import { getDatabase, ref, set } from 'https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js'
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries
    
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
        apiKey: "AIzaSyCZtBOyQgLvt0cHkaj1OZ3C07mdrZVfMoc",
        authDomain: "votingproject-98318.firebaseapp.com",
        databaseURL: "https://votingproject-98318-default-rtdb.firebaseio.com",
        projectId: "votingproject-98318",
        storageBucket: "votingproject-98318.appspot.com",
        messagingSenderId: "176078442562",
        appId: "1:176078442562:web:30d90f27d34d9bc5b95ddb",
        measurementId: "G-VEBCVDK86J"
      };
    
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);

      function writeOptionsData(optionsString){
        const options = optionsString.split('\n');
        const db = getDatabase();

        for (let i=0; i < options.length; i++){
          set(ref(db, 'options'),{
            options: options
          });
        }
      }

      const form = document.getElementById("votingForm");

      form.addEventListener('submit', function (event) {
      event.preventDefault(); // Prevent the default form submission

      // Get form data
      const formData = new FormData(form);
      writeOptionsData(formData.get('voteFor'));
      setTimeout(() => { window.location.replace("host2.html");  }, 3000);

      });
    </script>
</body>

</html>